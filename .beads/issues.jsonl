{"id":"skillssupply-0xc","title":"sksup pkg remove command","description":"Remove package from ./skills.toml by alias. Error if alias not found. Use ink for output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:18.882414-05:00","created_by":"alizain","updated_at":"2025-12-30T12:15:19.502218-05:00","closed_at":"2025-12-30T12:15:19.502218-05:00","close_reason":"Closed","labels":["commands","sksup"],"dependencies":[{"issue_id":"skillssupply-0xc","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:18.883453-05:00","created_by":"daemon"},{"issue_id":"skillssupply-0xc","depends_on_id":"skillssupply-5jr","type":"blocks","created_at":"2025-12-28T21:22:46.685623-05:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"skillssupply-0xc","author":"alizain","text":"pkg remove now routed via sksup pkg remove; validated with local manifest update using pseudo-tty.","created_at":"2025-12-30T17:15:05Z"}]}
{"id":"skillssupply-160","title":"sksup sync command","description":"Orchestrate full sync flow: discover manifests, parse/merge, resolve packages, fetch, detect type, extract skills, install to enabled agents. Use ink for progress output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:18.493891-05:00","created_by":"alizain","updated_at":"2025-12-30T12:03:35.12581-05:00","closed_at":"2025-12-30T12:03:35.12581-05:00","close_reason":"Closed","labels":["commands","sksup"],"dependencies":[{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:18.494967-05:00","created_by":"daemon"},{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-vsp","type":"blocks","created_at":"2025-12-28T21:22:42.111824-05:00","created_by":"daemon"},{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-98v","type":"blocks","created_at":"2025-12-28T21:22:42.131987-05:00","created_by":"daemon"},{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-3e6","type":"blocks","created_at":"2025-12-28T21:22:42.150675-05:00","created_by":"daemon"},{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-pzy","type":"blocks","created_at":"2025-12-28T21:22:42.171511-05:00","created_by":"daemon"},{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-n2f","type":"blocks","created_at":"2025-12-28T21:22:42.191657-05:00","created_by":"daemon"},{"issue_id":"skillssupply-160","depends_on_id":"skillssupply-jcy","type":"blocks","created_at":"2025-12-28T21:22:42.210952-05:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"skillssupply-160","author":"alizain","text":"Implemented sync command via core/sync with clack prompts (ink removed per decision). Tested dry-run and install flows with local package.","created_at":"2025-12-30T17:03:20Z"}]}
{"id":"skillssupply-19a","title":"Implement Hono API: git smart-HTTP + repo generation + auth endpoints","description":"Create packages/api (@skills-supply/api) with Hono server: GET /me/:repo.git/info/refs and POST /me/:repo.git/git-upload-pack, token auth (Basic), repo_state caching, stub plugin generation, CLI auth endpoints (/auth/cli, /auth/cli/status). Use database package for persistence.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T10:14:21.037012-05:00","updated_at":"2025-12-19T13:44:58.058495-05:00","closed_at":"2025-12-19T13:44:58.058495-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"skillssupply-19a","depends_on_id":"skillssupply-yf2","type":"parent-child","created_at":"2025-12-19T10:14:44.004326-05:00","created_by":"daemon"}]}
{"id":"skillssupply-1ih","title":"Confirm docker-compose defaults (ports/db name/credentials)","description":"Validate desired Postgres docker-compose defaults and adjust docker-compose.yaml + database env expectations.","design":"**Decision: Docker-compose defaults (following cuttlefish convention)**\n\n```yaml\nservices:\n  postgres:\n    image: postgres:18\n    container_name: skillssupply_dev\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: postgres\n      POSTGRES_DB: skillssupply_dev\n    ports:\n      - \"5432:5432\"\n```\n\n**Convention:**\n- Container name: `{project}_dev`\n- User/password: `postgres`/`postgres` (local dev only)\n- DB name: `{project}_dev`\n- Standard port 5432","notes":"Decided 2025-12-19: Follow cuttlefish convention.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:09:08.481756-05:00","updated_at":"2025-12-19T12:57:40.725654-05:00","closed_at":"2025-12-19T12:57:40.725654-05:00","close_reason":"Decision made: Follow cuttlefish convention (skillssupply_dev, postgres/postgres, port 5432)","dependencies":[{"issue_id":"skillssupply-1ih","depends_on_id":"skillssupply-l2q","type":"discovered-from","created_at":"2025-12-19T12:09:13.422882-05:00","created_by":"daemon"}]}
{"id":"skillssupply-1xm","title":"Define pipeline types for sync stages","description":"Introduce explicit types for each pipeline stage (resolved manifest, fetched packages, detected packages, extracted packages) so dataflow is explicit and type-safe across sync.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T20:35:00.774781-05:00","created_by":"alizain","updated_at":"2025-12-30T12:02:27.86789-05:00","closed_at":"2025-12-30T12:02:27.86789-05:00","close_reason":"Closed","labels":["core-sync","sksup"],"dependencies":[{"issue_id":"skillssupply-1xm","depends_on_id":"skillssupply-160","type":"discovered-from","created_at":"2025-12-29T20:35:00.776582-05:00","created_by":"alizain"}]}
{"id":"skillssupply-2fd","title":"Package type detection","description":"Detect package structure: skills.toml manifest, subdirs with SKILL.md, or single SKILL.md at root. Error if no recognizable structure.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:53.487375-05:00","created_by":"alizain","updated_at":"2025-12-29T19:58:30.2356-05:00","closed_at":"2025-12-29T19:58:30.2356-05:00","close_reason":"Added package type detection for manifest/plugin/subdir/root.","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-2fd","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:53.48853-05:00","created_by":"daemon"},{"issue_id":"skillssupply-2fd","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:22:05.93523-05:00","created_by":"daemon"}]}
{"id":"skillssupply-3e6","title":"Full reconciliation on sync","description":"Remove skills from agent paths that are not in manifest. Track installed skills to enable cleanup. Full reconciliation means installed state matches manifest exactly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:05.656653-05:00","created_by":"alizain","updated_at":"2025-12-30T12:02:27.866214-05:00","closed_at":"2025-12-30T12:02:27.866214-05:00","close_reason":"Closed","labels":["core-agents","sksup"],"dependencies":[{"issue_id":"skillssupply-3e6","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:05.657638-05:00","created_by":"daemon"},{"issue_id":"skillssupply-3e6","depends_on_id":"skillssupply-8rz","type":"blocks","created_at":"2025-12-28T21:22:08.423086-05:00","created_by":"daemon"}]}
{"id":"skillssupply-3rn","title":"Add stage-tagged sync error wrapper","description":"Wrap module errors with a stage tag (discover/parse/merge/resolve/fetch/detect/extract/install) to unify CLI error reporting while preserving underlying details.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T20:35:30.717654-05:00","created_by":"alizain","updated_at":"2025-12-30T12:02:27.869347-05:00","closed_at":"2025-12-30T12:02:27.869347-05:00","close_reason":"Closed","labels":["core-sync","sksup"],"dependencies":[{"issue_id":"skillssupply-3rn","depends_on_id":"skillssupply-160","type":"discovered-from","created_at":"2025-12-29T20:35:30.719625-05:00","created_by":"alizain"}]}
{"id":"skillssupply-453","title":"Confirm stub plugin.json schema and update generator","description":"Decide minimum plugin.json fields for stub plugins and adjust generator accordingly (manifest structure, version, commands).","design":"**Decision: Dynamic stub/full serving from single URL**\n\n**URL:** `skills.supply/u/:CREATOR_USERNAME/:PLUGIN_NAME.git`\n\n**Request flow:**\n1. User fetches via git (Basic auth with API token)\n2. Identify user from credentials, check purchase status\n3. Purchased → full version | Not purchased → stub version\n\n**Stub version (non-purchasers):**\n- Generated on-demand, short TTL cache\n- Valid plugin.json with version `0.0.0-stub`\n- `/buy` command that opens purchase page in browser\n- No freemium content for now (keep simple)\n\n**Full version (purchasers):**\n- Fetched from seller's GitHub on-demand, short TTL cache\n- May inject license validation, analytics, etc.\n\n**Stub plugin.json schema:**\n```json\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"0.0.0-stub\",\n  \"description\": \"Premium plugin by @creator - purchase required\"\n}\n```\n\n**Stub commands/buy.md:**\nOpens `https://skills.supply/u/:creator/:plugin` purchase page","notes":"Decided 2025-12-19: Single URL serves stub vs full based on purchase status. No freemium for now.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:59:53.042926-05:00","updated_at":"2025-12-19T12:41:25.751529-05:00","closed_at":"2025-12-19T12:41:25.751529-05:00","close_reason":"Decision made: dynamic stub/full serving from single URL with /buy command in stub","dependencies":[{"issue_id":"skillssupply-453","depends_on_id":"skillssupply-19a","type":"discovered-from","created_at":"2025-12-19T11:59:58.758514-05:00","created_by":"daemon"}]}
{"id":"skillssupply-45q","title":"Set up bun build pipeline","description":"Add bundle script using bun build --compile. Test standalone binary works. Update package.json scripts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:16.10922-05:00","created_by":"alizain","updated_at":"2025-12-28T21:39:52.090025-05:00","closed_at":"2025-12-28T21:39:52.090025-05:00","close_reason":"Closed","labels":["infrastructure","sksup"]}
{"id":"skillssupply-4aa","title":"sksup agent add/remove commands","description":"Enable/disable agents: sksup agent add claude-code, sksup agent remove codex. Write to [agents] section in ./skills.toml.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:25.799439-05:00","created_by":"alizain","updated_at":"2025-12-30T08:57:52.914512-05:00","closed_at":"2025-12-30T08:57:52.914512-05:00","close_reason":"Added agent add/remove commands that update skills.toml.","labels":["commands","sksup"],"dependencies":[{"issue_id":"skillssupply-4aa","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:25.800618-05:00","created_by":"daemon"},{"issue_id":"skillssupply-4aa","depends_on_id":"skillssupply-5jr","type":"blocks","created_at":"2025-12-28T21:22:48.976148-05:00","created_by":"daemon"},{"issue_id":"skillssupply-4aa","depends_on_id":"skillssupply-aik","type":"blocks","created_at":"2025-12-28T21:22:48.996903-05:00","created_by":"daemon"}]}
{"id":"skillssupply-5jr","title":"TOML parsing with smol-toml","description":"Parse skills.toml files using smol-toml. Validate structure matches expected schema. Return typed Manifest objects.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:33.660364-05:00","created_by":"alizain","updated_at":"2025-12-29T10:51:23.551889-05:00","closed_at":"2025-12-29T10:51:23.551889-05:00","close_reason":"Closed","labels":["core-manifest","sksup"],"dependencies":[{"issue_id":"skillssupply-5jr","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:33.661637-05:00","created_by":"daemon"},{"issue_id":"skillssupply-5jr","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:21:58.922218-05:00","created_by":"daemon"}]}
{"id":"skillssupply-5r5","title":"Replace ink with clack for CLI prompts","description":"Use @clack/prompts instead of ink for CLI interactions. Clack is lighter weight and better suited for our needs. Update all commands to use clack for spinners, confirmations, and select prompts.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:57:56.175533-05:00","created_by":"alizain","updated_at":"2025-12-30T09:17:18.812059-05:00","closed_at":"2025-12-30T09:17:18.812059-05:00","close_reason":"Replaced Ink/React with @clack/prompts and migrated commands to .ts.","labels":["infrastructure","sksup"]}
{"id":"skillssupply-63l","title":"Migrate sksup CLI from cac to commander 14.0.2","description":"Switch sksup CLI parsing to Commander.js (v14.0.2) with nested subcommands for pkg/agent, remove manual dispatch logic, update help/usage, replace cac dependency, and validate CLI commands.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T15:28:04.231168-05:00","created_by":"alizain","updated_at":"2025-12-30T15:28:26.418126-05:00"}
{"id":"skillssupply-642","title":"Review CLI auth handshake flow for security implications","description":"Review the CLI authentication handshake flow for security implications before implementation.\n\nCurrent proposed flow:\n1. CLI calls POST /auth/cli → gets session_id\n2. CLI opens browser to https://skills.supply/auth/cli?session=...\n3. User logs in via browser\n4. CLI polls GET /auth/cli/status?session=... until it gets token\n5. CLI stores token using OS credential helper\n\nQuestions to review:\n- Is session_id sufficiently random/unguessable?\n- Should /auth/cli/status require any auth or is session_id enough?\n- Rate limiting on polling endpoint?\n- Should session be single-use after token issued?\n- Any CSRF/redirect concerns on browser side?","design":"**Decision: Doppler-style Device Flow**\n\n## Flow Summary\n\n1. `POST /auth/cli` → returns `device_code` (secret) + `user_code` (human-readable)\n2. CLI displays code, copies to clipboard, opens browser to `/auth/cli`\n3. User pastes code in browser, clicks Authorize\n4. CLI polls `POST /auth/cli/token` with `device_code`\n5. Server returns token, CLI stores in OS keychain\n\n## User Code Format\n\n- **Length:** 12 characters\n- **Format:** `XXXX-XXXX-XXXX`\n- **Charset:** `BCDFGHJKMNPQRSTVWXYZ` (20 consonants, no vowels, no confusing chars)\n- **Entropy:** 20^12 ≈ 4 trillion combinations\n\n## API Endpoints\n\n**POST /auth/cli** (no auth)\n- Creates session\n- Returns: `{ device_code, user_code, verification_url, expires_in, interval }`\n- Rate limit: 5/min per IP\n\n**GET /auth/cli** (no auth)\n- Browser auth page, user enters code\n\n**POST /auth/cli/verify** (web session required)\n- Body: `{ user_code }`\n- Links user to session, marks authenticated\n\n**POST /auth/cli/token** (no auth)\n- Body: `{ device_code }`\n- Returns: `{ status: \"pending\" | \"success\" | \"expired\", token?, user_id?, username?, email? }`\n- Rate limit: 1/5s per device_code\n\n## Response Statuses\n\n| Status | Meaning |\n|--------|---------|\n| `pending` | User hasn't completed auth yet |\n| `success` | Token issued |\n| `expired` | Session timed out |\n\n## Security Properties\n\n- No session info in URLs\n- `device_code` is 256-bit secret, never exposed\n- `user_code` is human-verified binding\n- Single-use sessions\n- 10 min expiry\n- Rate limited polling\n\n## Database: cli_auth_sessions\n\n```sql\nCREATE TABLE cli_auth_sessions (\n  id UUID PRIMARY KEY,\n  device_code TEXT NOT NULL UNIQUE,  -- 256-bit hex\n  user_code TEXT NOT NULL UNIQUE,    -- XXXX-XXXX-XXXX\n  status TEXT NOT NULL DEFAULT 'pending',\n  user_id UUID REFERENCES users(id),\n  expires_at TIMESTAMPTZ NOT NULL,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  authenticated_at TIMESTAMPTZ,\n  consumed_at TIMESTAMPTZ,\n  ip_address INET,\n  user_agent TEXT\n);\n```","notes":"Decided 2025-12-19: Doppler-style device flow with 12-char user code, no slow_down status.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T12:53:36.314164-05:00","updated_at":"2025-12-19T13:22:13.931676-05:00","closed_at":"2025-12-19T13:22:13.931676-05:00","close_reason":"Decision made: Doppler-style device flow with user_code (12 chars) + device_code, no URL exposure","dependencies":[{"issue_id":"skillssupply-642","depends_on_id":"skillssupply-qz1","type":"discovered-from","created_at":"2025-12-19T12:53:36.314992-05:00","created_by":"daemon"}]}
{"id":"skillssupply-712","title":"Spike: Unified slash command format for Claude Code + Codex CLI","description":"Investigate creating a common skill/command format that works across both Claude Code and Codex CLI.\n\n**Key findings from initial research:**\n- Both use Markdown + YAML frontmatter\n- Common: description, argument-hint, $1-$9, $ARGUMENTS, $$\n- Claude-only: allowed-tools, model, !`bash`, @file refs\n- Codex-only: named placeholders ($FILE, $TICKET_ID)\n- Different locations: .claude/commands/ vs ~/.codex/prompts/\n\n**Potential approach:**\n1. Define superset format in sksup\n2. Parse once, transform for each target\n3. Install to both agent command directories\n\nDocs:\n- https://code.claude.com/docs/en/slash-commands#custom-slash-commands\n- https://developers.openai.com/codex/cli/slash-commands","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-29T20:20:46.689883-05:00","created_by":"alizain","updated_at":"2025-12-29T20:21:00.733167-05:00"}
{"id":"skillssupply-7k2","title":"Add pipeline invariant validation between stages","description":"Centralize checks between stages (e.g., fetched package path exists, extracted skills non-empty) to ensure fail-fast semantics with consistent errors.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T20:35:59.555152-05:00","created_by":"alizain","updated_at":"2025-12-30T12:02:27.870661-05:00","closed_at":"2025-12-30T12:02:27.870661-05:00","close_reason":"Closed","labels":["core-sync","sksup"],"dependencies":[{"issue_id":"skillssupply-7k2","depends_on_id":"skillssupply-160","type":"discovered-from","created_at":"2025-12-29T20:35:59.557424-05:00","created_by":"alizain"}]}
{"id":"skillssupply-7mg","title":"Fix shared build errors in next-config-base","description":"tsc --build fails in @skills-supply/shared: missing webpack types and implicit any in src/next-config-base.ts. Resolve webpack typings and type the rule param.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T09:09:38.420901-05:00","created_by":"alizain","updated_at":"2025-12-30T09:31:41.925263-05:00","closed_at":"2025-12-30T09:31:41.925263-05:00","close_reason":"Deleted @skills-supply/shared package. Moved next-config-base.ts to packages/web/lib/next-config.ts (with inlined webpack types) and fontawesome.tsx to packages/web/components/FontAwesomeIcon.tsx. Both files are now local to the only consumer (web package).","labels":["build","shared"],"dependencies":[{"issue_id":"skillssupply-7mg","depends_on_id":"skillssupply-45q","type":"discovered-from","created_at":"2025-12-29T09:09:38.423266-05:00","created_by":"alizain"}]}
{"id":"skillssupply-7st","title":"Centralize core IO helpers with consistent error shapes","description":"Consolidate safeStat/ensureDir/readDir/runGit helpers into shared core utilities to enforce consistent error reporting and reduce duplication.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T20:35:16.298877-05:00","created_by":"alizain","updated_at":"2025-12-30T12:02:27.868649-05:00","closed_at":"2025-12-30T12:02:27.868649-05:00","close_reason":"Closed","labels":["core-utils","sksup"],"dependencies":[{"issue_id":"skillssupply-7st","depends_on_id":"skillssupply-160","type":"discovered-from","created_at":"2025-12-29T20:35:16.300647-05:00","created_by":"alizain"}]}
{"id":"skillssupply-8rz","title":"Agent installation","description":"Copy skills to agent paths with prefixed names (e.g., superpowers-brainstorming). Create directories if needed. Handle symlinks for local path packages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:05.462055-05:00","created_by":"alizain","updated_at":"2025-12-29T20:41:52.670701-05:00","closed_at":"2025-12-29T20:41:52.670701-05:00","close_reason":"Implemented agent installation with copy/symlink handling.","labels":["core-agents","sksup"],"dependencies":[{"issue_id":"skillssupply-8rz","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:05.463149-05:00","created_by":"daemon"},{"issue_id":"skillssupply-8rz","depends_on_id":"skillssupply-aik","type":"blocks","created_at":"2025-12-28T21:22:08.404206-05:00","created_by":"daemon"}]}
{"id":"skillssupply-98v","title":"Skill extraction from packages","description":"Find SKILL.md files within packages. Parse YAML frontmatter for skill name. Return list of Skill objects with name and source path.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:05.069339-05:00","created_by":"alizain","updated_at":"2025-12-29T20:09:58.416799-05:00","closed_at":"2025-12-29T20:09:58.416799-05:00","close_reason":"Implemented SKILL.md extraction with frontmatter parsing.","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-98v","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:05.070409-05:00","created_by":"daemon"},{"issue_id":"skillssupply-98v","depends_on_id":"skillssupply-2fd","type":"blocks","created_at":"2025-12-28T21:22:05.9546-05:00","created_by":"daemon"}]}
{"id":"skillssupply-9uw","title":"Confirm sksup base URL configuration default","description":"Confirm SKSUP_BASE_URL default and override behavior; update CLI config/messages as needed.","design":"**Decision: sksup base URL configuration**\n\n**Default:**\n- `https://api.skills.supply` (production)\n\n**Override:**\n- `SKSUP_BASE_URL` env var\n\n**Implementation:**\n- Use `packages/sksup/src/env.ts` for configuration\n- Bun compiles this into the binary\n- Env var checked at runtime for override\n\n```typescript\n// packages/sksup/src/env.ts\nexport const SKSUP_BASE_URL = process.env.SKSUP_BASE_URL ?? \"https://api.skills.supply\";\n```","notes":"Decided 2025-12-19: Default to api.skills.supply, override via SKSUP_BASE_URL, use env.ts for bun compile.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:09:18.749735-05:00","updated_at":"2025-12-19T12:59:12.993218-05:00","closed_at":"2025-12-19T12:59:12.993218-05:00","close_reason":"Decision made: Default https://api.skills.supply, override via SKSUP_BASE_URL, config in env.ts for bun compile","dependencies":[{"issue_id":"skillssupply-9uw","depends_on_id":"skillssupply-wy2","type":"discovered-from","created_at":"2025-12-19T12:09:22.827054-05:00","created_by":"daemon"}]}
{"id":"skillssupply-aik","title":"Agent registry","description":"Define agents with id, displayName, skillsPath, detect function. Support Claude Code (~/.claude/skills/), Codex (~/.codex/skills/), OpenCode (~/.config/opencode/skill/).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:05.266887-05:00","created_by":"alizain","updated_at":"2025-12-29T20:16:51.974497-05:00","closed_at":"2025-12-29T20:16:51.974497-05:00","close_reason":"Defined agent registry with detection paths and skill locations.","labels":["core-agents","sksup"],"dependencies":[{"issue_id":"skillssupply-aik","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:05.267831-05:00","created_by":"daemon"},{"issue_id":"skillssupply-aik","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:22:08.383185-05:00","created_by":"daemon"}]}
{"id":"skillssupply-cht","title":"Sparse checkout for monorepo package paths","description":"When a package declaration includes a subdirectory path, use git sparse checkout (or equivalent) for github/git fetches instead of full clones.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T19:59:27.701155-05:00","created_by":"alizain","updated_at":"2025-12-29T20:22:58.09479-05:00","closed_at":"2025-12-29T20:22:58.09479-05:00","close_reason":"Added sparse checkout for monorepo package paths.","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-cht","depends_on_id":"skillssupply-pzy","type":"discovered-from","created_at":"2025-12-29T19:59:27.703254-05:00","created_by":"alizain"}]}
{"id":"skillssupply-d9u","title":"sksup agent interactive mode","description":"Ink-based agent toggle UI. Show all supported agents with checkboxes. Triggered by bare 'sksup agent' command.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:25.981487-05:00","created_by":"alizain","updated_at":"2025-12-30T15:12:53.083837-05:00","closed_at":"2025-12-30T15:12:53.083837-05:00","close_reason":"Closed","labels":["commands","sksup"],"dependencies":[{"issue_id":"skillssupply-d9u","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:25.982552-05:00","created_by":"daemon"},{"issue_id":"skillssupply-d9u","depends_on_id":"skillssupply-4aa","type":"blocks","created_at":"2025-12-28T21:22:49.018365-05:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"skillssupply-d9u","author":"alizain","text":"Agent interactive exists; unable to complete multiselect in non-interactive run (TTY input required). Needs manual validation.","created_at":"2025-12-30T17:15:34Z"},{"id":7,"issue_id":"skillssupply-d9u","author":"alizain","text":"Validated agent interactive via pseudo-tty: selection prompt renders; submitting default selection completes with 'No agent changes needed'. Attempting to deselect all shows 'select at least one option' constraint.","created_at":"2025-12-30T20:12:39Z"}]}
{"id":"skillssupply-e3w","title":"Manifest discovery","description":"Walk up directory tree from cwd to home. Find all skills.toml files. Always include ~/.sksup/skills.toml as base layer.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:33.852618-05:00","created_by":"alizain","updated_at":"2025-12-29T11:00:09.012136-05:00","closed_at":"2025-12-29T11:00:09.012136-05:00","close_reason":"Closed","labels":["core-manifest","sksup"],"dependencies":[{"issue_id":"skillssupply-e3w","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:33.853572-05:00","created_by":"daemon"},{"issue_id":"skillssupply-e3w","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:21:58.943809-05:00","created_by":"daemon"}]}
{"id":"skillssupply-eck","title":"Reduce sparse checkout duplication across monorepo paths","description":"Replace cache-based fetch strategy with per-sync ephemeral clones.\n\n- For each sync run and per agent, create a temp dir and shallow clone each package. Duplicated clones across agents are acceptable for now.\n- Local path packages remain symlink installs (no clone).\n- For pinned revs, attempt shallow fetch; if the commit is missing, fall back to a deeper or full fetch.\n- Remove ~/.cache/sksup/repos usage.\n\nNote: the current sparse-checkout cache implementation should be significantly reworked and mostly removed.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T20:35:45.923248-05:00","created_by":"alizain","updated_at":"2025-12-30T12:02:27.870039-05:00","closed_at":"2025-12-30T12:02:27.870039-05:00","close_reason":"Closed","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-eck","depends_on_id":"skillssupply-cht","type":"discovered-from","created_at":"2025-12-29T20:35:45.925065-05:00","created_by":"alizain"}]}
{"id":"skillssupply-f2t","title":"sksup pkg add command","description":"Add packages via CLI: sksup pkg add gh owner/repo [--tag|--branch|--rev] [--path] [--as]. Write to ./skills.toml, confirm creation if file doesn't exist.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:18.688688-05:00","created_by":"alizain","updated_at":"2025-12-30T12:14:49.663486-05:00","closed_at":"2025-12-30T12:14:49.663486-05:00","close_reason":"Closed","labels":["commands","sksup"],"dependencies":[{"issue_id":"skillssupply-f2t","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:18.689737-05:00","created_by":"daemon"},{"issue_id":"skillssupply-f2t","depends_on_id":"skillssupply-5jr","type":"blocks","created_at":"2025-12-28T21:22:46.645515-05:00","created_by":"daemon"},{"issue_id":"skillssupply-f2t","depends_on_id":"skillssupply-rtm","type":"blocks","created_at":"2025-12-28T21:22:46.665954-05:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"skillssupply-f2t","author":"alizain","text":"pkg add now routed via sksup pkg add; validated with local path package using pseudo-tty.","created_at":"2025-12-30T17:14:35Z"}]}
{"id":"skillssupply-f9q","title":"sksup pkg interactive mode","description":"Ink-based package browser/manager. Show installed packages, allow add/remove. Triggered by bare 'sksup pkg' command.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:18:19.082325-05:00","created_by":"alizain","updated_at":"2025-12-30T15:12:24.19592-05:00","closed_at":"2025-12-30T15:12:24.19592-05:00","close_reason":"Closed","labels":["commands","sksup"],"dependencies":[{"issue_id":"skillssupply-f9q","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:18:19.083428-05:00","created_by":"daemon"},{"issue_id":"skillssupply-f9q","depends_on_id":"skillssupply-f2t","type":"blocks","created_at":"2025-12-28T21:22:46.705389-05:00","created_by":"daemon"},{"issue_id":"skillssupply-f9q","depends_on_id":"skillssupply-0xc","type":"blocks","created_at":"2025-12-28T21:22:46.725457-05:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"skillssupply-f9q","author":"alizain","text":"pkg interactive exists; requires TTY input to validate (multiselect/confirm). Not completed in non-interactive run.","created_at":"2025-12-30T17:16:27Z"},{"id":6,"issue_id":"skillssupply-f9q","author":"alizain","text":"Validated pkg interactive via pseudo-tty: add flow (local path ../pkg, alias demo) and remove flow removed demo from skills.toml.","created_at":"2025-12-30T20:12:11Z"}]}
{"id":"skillssupply-jcy","title":"Local path package handling","description":"Resolve relative paths from skills.toml source directory. Validate path exists. Convert to absolute path in canonical form.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:53.279849-05:00","created_by":"alizain","updated_at":"2025-12-29T19:38:35.140343-05:00","closed_at":"2025-12-29T19:38:35.140343-05:00","close_reason":"Closed","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-jcy","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:53.280934-05:00","created_by":"daemon"},{"issue_id":"skillssupply-jcy","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:22:05.915513-05:00","created_by":"daemon"}]}
{"id":"skillssupply-l2q","title":"Create packages/database + docker-compose + initial migrations","description":"Copy toastandchill database + related files into packages/database; adapt imports; add docker-compose.yaml at repo root; define initial migrations for users/tokens/cli_auth_sessions/repo_state/plugins/purchases as needed by API + web.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T10:14:15.744229-05:00","updated_at":"2025-12-19T13:44:50.189102-05:00","closed_at":"2025-12-19T13:44:50.189102-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"skillssupply-l2q","depends_on_id":"skillssupply-yf2","type":"parent-child","created_at":"2025-12-19T10:14:39.963884-05:00","created_by":"daemon"}]}
{"id":"skillssupply-llt","title":"Switch to bun-only build (drop tsc emit)","description":"**Decision:** Just bun it.\n\n**New build flow:**\n- `tsc` → type checking only (`noEmit: true`)\n- `bun build ./src/cli.ts --compile` → binary distribution\n- `bun build ./src/cli.ts --outdir ./dist --target node` → npm distribution\n\nBun resolves @/ aliases natively. No need for tsc-alias, tsdown, or esbuild.\n\n**Changes needed:**\n1. Set `noEmit: true` in tsconfig.json\n2. Update package.json scripts to use bun build directly from src/\n3. Remove tsc from build pipeline (keep for `npm run check`)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T10:53:03.939368-05:00","created_by":"alizain","updated_at":"2025-12-30T08:35:25.295347-05:00","closed_at":"2025-12-30T08:35:25.295347-05:00","close_reason":"Switched sksup build to bun-only with noEmit typecheck.","labels":["build","sksup"],"dependencies":[{"issue_id":"skillssupply-llt","depends_on_id":"skillssupply-5jr","type":"discovered-from","created_at":"2025-12-29T10:53:03.941764-05:00","created_by":"alizain"}]}
{"id":"skillssupply-n2f","title":"Git URL package fetching","description":"Clone arbitrary git URLs. Handle HTTPS and SSH protocols. Support --tag, --branch, --rev, --path options.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:53.084826-05:00","created_by":"alizain","updated_at":"2025-12-29T19:37:25.628268-05:00","closed_at":"2025-12-29T19:37:25.628268-05:00","close_reason":"Closed","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-n2f","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:53.085951-05:00","created_by":"daemon"},{"issue_id":"skillssupply-n2f","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:22:05.895978-05:00","created_by":"daemon"}]}
{"id":"skillssupply-nkt","title":"Package skills.toml schema + extraction","description":"Define package-level skills.toml schema (name/org/skills list) and implement extraction to enumerate skills from manifest.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T20:08:25.130239-05:00","created_by":"alizain","updated_at":"2025-12-29T20:08:25.130239-05:00","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-nkt","depends_on_id":"skillssupply-98v","type":"discovered-from","created_at":"2025-12-29T20:08:25.131965-05:00","created_by":"alizain"}]}
{"id":"skillssupply-ntq","title":"Track web (Next.js) data-model needs for creator/end-user flows","description":"Define data models for web app: users (id/email/username), creator profiles (payout/Stripe Connect status), plugins (slug/name/description/preview/price/is_active/source repo connection), purchases/entitlements (status/paid_at/refund), API tokens + devices, CLI auth sessions, marketplace listings, and analytics/usage events. Keep in sync with API/db schema decisions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T10:14:30.817009-05:00","updated_at":"2025-12-19T10:39:23.352662-05:00","dependencies":[{"issue_id":"skillssupply-ntq","depends_on_id":"skillssupply-yf2","type":"parent-child","created_at":"2025-12-19T10:14:54.300407-05:00","created_by":"daemon"}]}
{"id":"skillssupply-omg","title":"Confirm API env var conventions (PUBLIC_BASE_URL, WEB_BASE_URL, REPO_CACHE_DIR, TTL)","description":"Decide naming/values for API env vars and defaults; update packages/api/src/env.ts and docs accordingly.","design":"**Decision: API env var conventions**\n\n**Base URLs:**\n- `API_BASE_URL` — public-facing API URL (e.g., `https://api.skills.supply`)\n- `WEB_BASE_URL` — web app URL for redirects (e.g., `https://skills.supply`)\n\n**Repo caching:**\n- `REPO_CACHE_DIR` — directory for cloned repos\n- `REPO_CACHE_TTL` — how long cached repos stay valid\n\n**Auth TTLs:**\n- `CLI_AUTH_SESSION_TTL` — browser auth session expiry (10 min)\n- `API_TOKEN_TTL` — token expiry duration (6-8 weeks)\n\n**Naming convention:**\n- Group related vars with shared prefix: `REPO_CACHE_*`, `CLI_AUTH_*`, `API_*`\n- TTLs are always `{GROUP}_{THING}_TTL` or `{THING}_TTL`\n- Makes it obvious what belongs together","notes":"Decided 2025-12-19: Use grouped prefixes (REPO_CACHE_*, CLI_AUTH_*, etc.) for clarity.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:08:58.389036-05:00","updated_at":"2025-12-19T12:56:13.051727-05:00","closed_at":"2025-12-19T12:56:13.051727-05:00","close_reason":"Decision made: API_BASE_URL, WEB_BASE_URL, grouped prefixes for TTLs (REPO_CACHE_TTL, CLI_AUTH_SESSION_TTL, etc.)","dependencies":[{"issue_id":"skillssupply-omg","depends_on_id":"skillssupply-19a","type":"discovered-from","created_at":"2025-12-19T12:09:03.238443-05:00","created_by":"daemon"}]}
{"id":"skillssupply-otj","title":"Define purchased plugin source integration (repo_url/source_repo_path)","description":"Decide how purchased plugin content is sourced and served (local mirror path vs remote clone, credentials for private GitHub, update strategy). Update plugin schema + API repo resolver accordingly.","design":"**Decision: Clone-on-demand from seller's repo**\n\n- When buyer requests a purchased plugin, we clone from seller's source repo on-demand\n- Serve from local clone, no long-term caching for now (add later if needed)\n- Seller provides access via GitHub OAuth token or deploy key\n- Buyer authenticates with Skills Supply API token only - no GitHub OAuth needed for buyers\n\n**Data model:**\n- `plugins.source_repo_url` - seller's GitHub repo\n- `plugins.source_ref` - branch/tag to clone\n- Clone stored temporarily in `REPO_CACHE_DIR`","notes":"Decided 2025-12-19: Keep simple with on-demand cloning. Add caching layer later when needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T11:59:39.885501-05:00","updated_at":"2025-12-19T12:41:31.950446-05:00","closed_at":"2025-12-19T12:41:31.950446-05:00","close_reason":"Decision made: clone-on-demand from seller's GitHub, short TTL cache, no buyer OAuth needed","dependencies":[{"issue_id":"skillssupply-otj","depends_on_id":"skillssupply-19a","type":"discovered-from","created_at":"2025-12-19T11:59:47.836228-05:00","created_by":"daemon"}]}
{"id":"skillssupply-pzy","title":"GitHub package fetching","description":"Clone GitHub repos via git. Handle --tag, --branch, --rev refs. Support sparse checkout for --path (monorepo subdirectory).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:52.837835-05:00","created_by":"alizain","updated_at":"2025-12-29T19:35:32.529467-05:00","closed_at":"2025-12-29T19:35:32.529467-05:00","close_reason":"Closed","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-pzy","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:52.839452-05:00","created_by":"daemon"},{"issue_id":"skillssupply-pzy","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:22:05.875255-05:00","created_by":"daemon"}]}
{"id":"skillssupply-qz1","title":"Decide CLI auth completion handshake + token format","description":"Confirm /auth/cli completion mechanism (endpoint + auth), session TTL, and API token format/prefix. Align API + sksup behavior accordingly.","design":"**Partial decision: Session TTL + Token expiry**\n\n**Browser auth session TTL:**\n- Session expires after 10 minutes if not completed\n- Forces user to run `sksup auth` again if they wait too long\n\n**Token expiry:**\n- See skillssupply-zfe for token format and expiry details\n\n**CLI auth handshake:**\n- Carved out to separate issue (skillssupply-xxx) for security review\n- Initial thinking: POST /auth/cli → session_id, poll /auth/cli/status\n- Needs security review before finalizing","notes":"Decided 2025-12-19: 10 min session TTL. CLI auth handshake carved out for separate security review.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:00:05.05884-05:00","updated_at":"2025-12-19T12:53:44.271866-05:00","closed_at":"2025-12-19T12:53:44.271866-05:00","close_reason":"Session TTL decided (10 min). CLI auth handshake carved out to skillssupply-642 for security review.","dependencies":[{"issue_id":"skillssupply-qz1","depends_on_id":"skillssupply-19a","type":"discovered-from","created_at":"2025-12-19T12:00:12.06897-05:00","created_by":"daemon"}]}
{"id":"skillssupply-rtm","title":"Package resolution to canonical form","description":"Convert PackageDeclaration to CanonicalPackage. Compute dedupe keys for each type. Handle alias derivation (repo name or explicit --as).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:34.241911-05:00","created_by":"alizain","updated_at":"2025-12-29T11:04:40.115822-05:00","closed_at":"2025-12-29T11:04:40.115822-05:00","close_reason":"Closed","labels":["core-packages","sksup"],"dependencies":[{"issue_id":"skillssupply-rtm","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:34.242896-05:00","created_by":"daemon"},{"issue_id":"skillssupply-rtm","depends_on_id":"skillssupply-yzr","type":"blocks","created_at":"2025-12-28T21:22:05.854526-05:00","created_by":"daemon"}]}
{"id":"skillssupply-vsp","title":"Manifest merging with priority rules","description":"Merge multiple manifests with priority (closest wins). Handle dedupe by canonical keys. Error on alias conflicts (same alias, different packages).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:34.044663-05:00","created_by":"alizain","updated_at":"2025-12-29T19:58:16.112608-05:00","closed_at":"2025-12-29T19:58:16.112608-05:00","close_reason":"Implemented manifest merge with priority + dedupe.","labels":["core-manifest","sksup"],"dependencies":[{"issue_id":"skillssupply-vsp","depends_on_id":"skillssupply-yzr","type":"discovered-from","created_at":"2025-12-28T21:17:34.045736-05:00","created_by":"daemon"},{"issue_id":"skillssupply-vsp","depends_on_id":"skillssupply-5jr","type":"blocks","created_at":"2025-12-28T21:21:58.970042-05:00","created_by":"daemon"},{"issue_id":"skillssupply-vsp","depends_on_id":"skillssupply-e3w","type":"blocks","created_at":"2025-12-28T21:21:58.989755-05:00","created_by":"daemon"}]}
{"id":"skillssupply-wy2","title":"Implement sksup CLI commands + credential helper flow","description":"Create packages/sksup (@skills-supply/sksup) CLI with auth/status/logout/whoami; browser auth, polling, git credential helper config and storage; no distribution scripts yet.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T10:14:25.895604-05:00","updated_at":"2025-12-19T13:45:04.322472-05:00","closed_at":"2025-12-19T13:45:04.322472-05:00","close_reason":"Closed via update","dependencies":[{"issue_id":"skillssupply-wy2","depends_on_id":"skillssupply-yf2","type":"parent-child","created_at":"2025-12-19T10:14:49.686985-05:00","created_by":"daemon"}]}
{"id":"skillssupply-yf2","title":"Implement Hono git server + sksup CLI packages (v3 design)","description":"Build API package for git HTTP smart protocol + auth endpoints and CLI package for auth/credential setup/install flow. Track ExecPlan + web data-model needs.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-19T10:06:33.574595-05:00","updated_at":"2025-12-19T13:45:09.167641-05:00","closed_at":"2025-12-19T13:45:09.167641-05:00","close_reason":"Closed via update"}
{"id":"skillssupply-yzr","title":"Restructure sksup for cac + ink","description":"Add cac, ink, react, smol-toml dependencies. Set up cac command routing in cli.ts. Convert existing auth commands to use ink for output.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T21:17:15.91467-05:00","created_by":"alizain","updated_at":"2025-12-28T21:39:52.088637-05:00","closed_at":"2025-12-28T21:39:52.088637-05:00","close_reason":"Closed","labels":["infrastructure","sksup"]}
{"id":"skillssupply-zfe","title":"Decide API token format + Basic username validation behavior","description":"Confirm token format/prefixing (e.g., ss_live_) and whether Basic auth should require username match. Update API auth + CLI handling accordingly.","design":"**Decision: Token format + Basic auth validation**\n\n**Token format:**\n- `ss_prod_xxx` for production\n- `ss_stg_xxx` for staging\n- Environment prefix makes it clear which environment a token belongs to\n\n**Basic auth validation:**\n- Username = user_id\n- Password = token\n- Backend MUST validate BOTH match (not just token)\n- Prevents token reuse if leaked without user_id\n\n**Token expiry:**\n- Tokens expire after 6-8 weeks (exact duration stored in code as constant)\n- `tokens.created_at` stored in database\n- Allows dynamic expiry adjustment without migration\n- On auth, check: `now - created_at \u003c TOKEN_TTL`","notes":"Decided 2025-12-19: ss_prod_/ss_stg_ prefix, validate both username+token, 6-8 week expiry with created_at in DB.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T12:08:50.335515-05:00","updated_at":"2025-12-19T12:53:44.223449-05:00","closed_at":"2025-12-19T12:53:44.223449-05:00","close_reason":"Decision made: ss_prod_/ss_stg_ prefix, validate both username+token, 6-8 week expiry","dependencies":[{"issue_id":"skillssupply-zfe","depends_on_id":"skillssupply-19a","type":"discovered-from","created_at":"2025-12-19T12:08:54.083279-05:00","created_by":"daemon"}]}
